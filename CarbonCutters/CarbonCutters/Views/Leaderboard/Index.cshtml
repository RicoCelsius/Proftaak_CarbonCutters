@using CarbonCuttersView.Models
@using CarbonCuttersCore
@using System.Globalization
@model LeaderBoardModel

<link rel="stylesheet" href="~/css/podium.css" asp-append-version="true" />
<div class="outerContainer">
    <div class="podiumSection">
        <div class="podiumContainer1">
            <div class="place-1">
                <div class="place-number">
                    #1
                </div>
                <div class="place-container">
                    <div class="place-picture">
                        <img src="~/Images/profileIcon.png" />
                    </div>
                    <div class="place-text">
                        <div>
                            @Model._users[0].name
                        </div>
                        <div class="points-1">
                            @Model._users[0].score.getPointsAsString() points
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="podiumContainer2">
            <div class="place-2">
                <div class="place-number">
                    #2
                </div>
                <div class="place-container">
                    <div class="place-picture">
                        <img src="~/Images/profileIcon.png"/>
                    </div>
                    <div class="place-text">
                        <div>
                            @Model._users[1].name
                        </div>
                        <div class="points-2">
                            @Model._users[1].score.getPointsAsString() points
                        </div>
                    </div>
                </div>
            </div>
            <img class="picture" src="/Images/Trophy2.svg"/>
            <img class="picture" src="/Images/Trophy1.svg" />
            <img class="picture" src="/Images/Trophy3.svg" />
            <div class="place-3">
                <div class="place-number">
                    #3
                </div>
                <div class="place-container">
                    <div class="place-picture">
                        <img src="~/Images/profileIcon.png" />
                    </div>
                    <div class="place-text">
                        <div>
                            @Model._users[2].name
                        </div>
                        <div class="points-3">
                            @Model._users[2].score.getPointsAsString() points
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="rest">
    @if(Model.user_place > 3){}
    @{
        int currentUserIndex = Model.user_place - 1; // Adjust index for zero-based list
        int startAbove = currentUserIndex - 1;
        int endAbove = Math.Max(startAbove - 2, 0);
        int startBelow = currentUserIndex + 1;
        int endBelow = Math.Min(startBelow + 2, Model._users.Count - 1);
    }
    @if (Model.user_place > 4)
    {
        @for (int i = endAbove; i <= startAbove; i++)
        {
            if (i >= 0)
            {
                var user = Model._users[i];
                string points = user.score.getPointsAsString();

                <div class="place-o">
                    <div class="place-number">#@(i + 1)</div>
                    <div class="place-container">
                        <div class="place-picture">
                            <img src="~/Images/profileIcon.png"/>
                        </div>
                        <div class="place-text">
                            <div>@user.name</div>
                            <div class="points">@points points</div>
                        </div>
                    </div>
                </div>
            }
        }
    }
    
    @if (Model.user_place > 3)
    {
        <div class="place-user">
            <div class="place-number">#@Model.user_place</div>
            <div class="place-container">
                <div class="place-picture">
                    <img src="~/Images/profileIcon.png"/>
                </div>
                <div class="place-text">
                    <div>@Model._users[Model.user_place - 1].name</div>
                    <div class="points">@Model._users[Model.user_place - 1].score.getPointsAsString() points</div>
                </div>
            </div>
        </div>
    }

    @for (int i = startBelow; i <= endBelow; i++)
    {
        @if (Model.user_place > 3)
        {
            if (i < Model._users.Count)
            {
                var user = Model._users[i];
                string points = user.score.getPointsAsString();

                <div class="place-e">
                    <div class="place-number">#@(i + 1)</div>
                    <div class="place-container">
                        <div class="place-picture">
                            <img src="~/Images/profileIcon.png"/>
                        </div>
                        <div class="place-text">
                            <div>@user.name</div>
                            <div class="points">@points points</div>
                        </div>
                    </div>
                </div>
            }
        }


    }

</div>
